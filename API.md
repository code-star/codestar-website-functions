<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [staticSiteMailer][1]
    -   [Parameters][2]
    -   [Examples][3]
-   [safeGetHeaders][4]
    -   [Parameters][5]

## staticSiteMailer

Lambda function staticSiteMailer

Method: POST

Expected fields:

-   name {string}
-   email {string}
-   message {string}

Validates the origin URL with [safeGetHeaders][6]

Endpoints

-   on test stage: [https://hjoutysc5k.execute-api.eu-west-1.amazonaws.com/test/static-site-mailer][7]
-   on prod stage: [https://267sder6c7.execute-api.eu-west-1.amazonaws.com/prod/static-site-mailer][8]

Envars that need to be set:
process.env.STATIC_SITE_MAILER_SOURCE;
process.env.STATIC_SITE_MAILER_DESTINATION;

Both mail addresses need to be validated in AWS SES

### Parameters

-   `event`  
-   `context`  
-   `callback`  

### Examples

```javascript
// Call locally from the CLI:
STATIC_SITE_MAILER_SOURCE=example@example.com STATIC_SITE_MAILER_DESTINATION=example@example.com DEBUG=true npx sls invoke local --function staticSiteMailer --path test/staticSiteMailer-dummy-payload.json

// Expected payload
{
  "headers": {
     "origin": "ORIGIN"
  },
  "body": "{\"name\": \"Sender Name\",\"email\": \"sender@example.com\",\"message\": \"This is a dummy message to test the contact form\",\"phone\": \"123\"}",
}
```

Returns **[Promise][9]&lt;void>** 

## safeGetHeaders

Gets reponse headers but throws error if the requesting origin is not whitelisted.
This must be done before anything else to prevent calls from unknown origins.

### Parameters

-   `origin`  {string} URL describing the origin of the call

Returns **any** headers {Object}

[1]: #staticsitemailer

[2]: #parameters

[3]: #examples

[4]: #safegetheaders

[5]: #parameters-1

[6]: safeGetHeaders

[7]: https://hjoutysc5k.execute-api.eu-west-1.amazonaws.com/test/static-site-mailer

[8]: https://267sder6c7.execute-api.eu-west-1.amazonaws.com/prod/static-site-mailer

[9]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
